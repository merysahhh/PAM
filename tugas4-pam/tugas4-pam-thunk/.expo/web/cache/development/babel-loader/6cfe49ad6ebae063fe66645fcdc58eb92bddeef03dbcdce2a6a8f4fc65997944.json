{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { CodedError, Platform } from 'expo-modules-core';\nimport { KeepAwakeEventState } from \"./KeepAwake.types\";\nvar wakeLockMap = {};\nexport default {\n  isAvailableAsync: function isAvailableAsync() {\n    return function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!Platform.isDOMAvailable) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\", 'wakeLock' in navigator);\n            case 2:\n              return _context.abrupt(\"return\", false);\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  activate: function activate(tag) {\n    return function _callee2() {\n      var wakeLock;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (Platform.isDOMAvailable) {\n                _context2.next = 2;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 2:\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(navigator.wakeLock.request('screen'));\n            case 4:\n              wakeLock = _context2.sent;\n              wakeLockMap[tag] = wakeLock;\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  deactivate: function deactivate(tag) {\n    return function _callee3() {\n      var _wakeLockMap$tag$rele, _wakeLockMap$tag;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (Platform.isDOMAvailable) {\n                _context3.next = 2;\n                break;\n              }\n              return _context3.abrupt(\"return\");\n            case 2:\n              if (!wakeLockMap[tag]) {\n                _context3.next = 7;\n                break;\n              }\n              (_wakeLockMap$tag$rele = (_wakeLockMap$tag = wakeLockMap[tag]).release) == null ? void 0 : _wakeLockMap$tag$rele.call(_wakeLockMap$tag);\n              delete wakeLockMap[tag];\n              _context3.next = 8;\n              break;\n            case 7:\n              throw new CodedError('ERR_KEEP_AWAKE_TAG_INVALID', \"The wake lock with tag \" + tag + \" has not activated yet\");\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  addListenerForTag: function addListenerForTag(tag, listener) {\n    var eventListener = function eventListener() {\n      listener({\n        state: KeepAwakeEventState.RELEASE\n      });\n    };\n    var sentinel = wakeLockMap[tag];\n    if (sentinel) {\n      if ('addEventListener' in sentinel) {\n        sentinel.addEventListener == null ? void 0 : sentinel.addEventListener('release', eventListener);\n      } else {\n        sentinel.onrelease = eventListener;\n      }\n    }\n    return {\n      remove: function remove() {\n        var sentinel = wakeLockMap[tag];\n        if (sentinel) {\n          if (sentinel.removeEventListener) {\n            sentinel.removeEventListener('release', eventListener);\n          } else {\n            sentinel.onrelease = null;\n          }\n        }\n      }\n    };\n  }\n};","map":{"version":3,"names":["CodedError","Platform","KeepAwakeEventState","wakeLockMap","isAvailableAsync","_callee","_regeneratorRuntime","async","_callee$","_context","prev","next","isDOMAvailable","abrupt","navigator","stop","Promise","activate","tag","_callee2","wakeLock","_callee2$","_context2","awrap","request","sent","deactivate","_callee3","_wakeLockMap$tag$rele","_wakeLockMap$tag","_callee3$","_context3","release","call","addListenerForTag","listener","eventListener","state","RELEASE","sentinel","addEventListener","onrelease","remove","removeEventListener"],"sources":["C:\\Users\\user\\tugas3-pam\\node_modules\\expo-keep-awake\\src\\ExpoKeepAwake.web.ts"],"sourcesContent":["import { CodedError, Platform, Subscription } from 'expo-modules-core';\n\nimport { KeepAwakeEventState, KeepAwakeListener } from './KeepAwake.types';\n\nconst wakeLockMap: Record<string, WakeLockSentinel> = {};\n\ntype WakeLockSentinel = {\n  onrelease: null | ((event: any) => void);\n  released: boolean;\n  type: 'screen';\n  release?: Function;\n\n  addEventListener?: (event: string, listener: (event: any) => void) => void;\n  removeEventListener?: (event: string, listener: (event: any) => void) => void;\n};\n\ndeclare const navigator: {\n  wakeLock: {\n    request(type: 'screen'): Promise<WakeLockSentinel>;\n  };\n};\n\n/** Wraps the webWakeLock API https://developer.mozilla.org/en-US/docs/Web/API/Screen_Wake_Lock_API */\nexport default {\n  async isAvailableAsync() {\n    if (Platform.isDOMAvailable) {\n      return 'wakeLock' in navigator;\n    }\n    return false;\n  },\n  async activate(tag: string) {\n    if (!Platform.isDOMAvailable) {\n      return;\n    }\n    const wakeLock = await navigator.wakeLock.request('screen');\n    wakeLockMap[tag] = wakeLock;\n  },\n  async deactivate(tag: string) {\n    if (!Platform.isDOMAvailable) {\n      return;\n    }\n    if (wakeLockMap[tag]) {\n      wakeLockMap[tag].release?.();\n      delete wakeLockMap[tag];\n    } else {\n      throw new CodedError(\n        'ERR_KEEP_AWAKE_TAG_INVALID',\n        `The wake lock with tag ${tag} has not activated yet`\n      );\n    }\n  },\n  addListenerForTag(tag: string, listener: KeepAwakeListener): Subscription {\n    const eventListener = () => {\n      listener({ state: KeepAwakeEventState.RELEASE });\n    };\n    const sentinel = wakeLockMap[tag];\n    if (sentinel) {\n      if ('addEventListener' in sentinel) {\n        sentinel.addEventListener?.('release', eventListener);\n      } else {\n        sentinel.onrelease = eventListener;\n      }\n    }\n    return {\n      remove: () => {\n        const sentinel = wakeLockMap[tag];\n        if (sentinel) {\n          if (sentinel.removeEventListener) {\n            sentinel.removeEventListener('release', eventListener);\n          } else {\n            sentinel.onrelease = null;\n          }\n        }\n      },\n    };\n  },\n};\n"],"mappings":";AAAA,SAASA,UAAU,EAAEC,QAAQ,QAAsB,mBAAmB;AAEtE,SAASC,mBAAmB;AAE5B,IAAMC,WAAW,GAAqC,EAAE;AAmBxD,eAAe;EACPC,gBAAgB,WAAAA,iBAAA;IAAA,gBAAAC,QAAA;MAAA,OAAAC,mBAAA,CAAAC,KAAA,UAAAC,SAAAC,QAAA;QAAA;UAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAA,KAChBV,QAAQ,CAACW,cAAc;gBAAAH,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAI,MAAA,WAClB,UAAU,IAAIC,SAAS;YAAA;cAAA,OAAAL,QAAA,CAAAI,MAAA,WAEzB,KAAK;YAAA;YAAA;cAAA,OAAAJ,QAAA,CAAAM,IAAA;UAAA;QAAA;MAAA,qBAAAC,OAAA;IAAA;EACd,CAAC;EACKC,QAAQ,WAAAA,SAACC,GAAW;IAAA,gBAAAC,SAAA;MAAA,IAAAC,QAAA;MAAA,OAAAd,mBAAA,CAAAC,KAAA,UAAAc,UAAAC,SAAA;QAAA;UAAA,QAAAA,SAAA,CAAAZ,IAAA,GAAAY,SAAA,CAAAX,IAAA;YAAA;cAAA,IACnBV,QAAQ,CAACW,cAAc;gBAAAU,SAAA,CAAAX,IAAA;gBAAA;cAAA;cAAA,OAAAW,SAAA,CAAAT,MAAA;YAAA;cAAAS,SAAA,CAAAX,IAAA;cAAA,OAAAL,mBAAA,CAAAiB,KAAA,CAGLT,SAAS,CAACM,QAAQ,CAACI,OAAO,CAAC,QAAQ,CAAC;YAAA;cAArDJ,QAAQ,GAAAE,SAAA,CAAAG,IAAA;cACdtB,WAAW,CAACe,GAAG,CAAC,GAAGE,QAAQ;YAAC;YAAA;cAAA,OAAAE,SAAA,CAAAP,IAAA;UAAA;QAAA;MAAA,qBAAAC,OAAA;IAAA;EAC9B,CAAC;EACKU,UAAU,WAAAA,WAACR,GAAW;IAAA,gBAAAS,SAAA;MAAA,IAAAC,qBAAA,EAAAC,gBAAA;MAAA,OAAAvB,mBAAA,CAAAC,KAAA,UAAAuB,UAAAC,SAAA;QAAA;UAAA,QAAAA,SAAA,CAAArB,IAAA,GAAAqB,SAAA,CAAApB,IAAA;YAAA;cAAA,IACrBV,QAAQ,CAACW,cAAc;gBAAAmB,SAAA,CAAApB,IAAA;gBAAA;cAAA;cAAA,OAAAoB,SAAA,CAAAlB,MAAA;YAAA;cAAA,KAGxBV,WAAW,CAACe,GAAG,CAAC;gBAAAa,SAAA,CAAApB,IAAA;gBAAA;cAAA;cAClB,CAAAiB,qBAAA,IAAAC,gBAAA,GAAA1B,WAAW,CAACe,GAAG,CAAC,EAACc,OAAO,qBAAxBJ,qBAAA,CAAAK,IAAA,CAAAJ,gBAAA,CAA4B;cAC5B,OAAO1B,WAAW,CAACe,GAAG,CAAC;cAACa,SAAA,CAAApB,IAAA;cAAA;YAAA;cAAA,MAElB,IAAIX,UAAU,CAClB,4BAA4B,8BACFkB,GAAG,4BAC9B;YAAA;YAAA;cAAA,OAAAa,SAAA,CAAAhB,IAAA;UAAA;QAAA;MAAA,qBAAAC,OAAA;IAAA;EAEL,CAAC;EACDkB,iBAAiB,WAAAA,kBAAChB,GAAW,EAAEiB,QAA2B;IACxD,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAQ;MACzBD,QAAQ,CAAC;QAAEE,KAAK,EAAEnC,mBAAmB,CAACoC;MAAO,CAAE,CAAC;IAClD,CAAC;IACD,IAAMC,QAAQ,GAAGpC,WAAW,CAACe,GAAG,CAAC;IACjC,IAAIqB,QAAQ,EAAE;MACZ,IAAI,kBAAkB,IAAIA,QAAQ,EAAE;QAClCA,QAAQ,CAACC,gBAAgB,oBAAzBD,QAAQ,CAACC,gBAAgB,CAAG,SAAS,EAAEJ,aAAa,CAAC;OACtD,MAAM;QACLG,QAAQ,CAACE,SAAS,GAAGL,aAAa;;;IAGtC,OAAO;MACLM,MAAM,EAAE,SAAAA,OAAA,EAAK;QACX,IAAMH,QAAQ,GAAGpC,WAAW,CAACe,GAAG,CAAC;QACjC,IAAIqB,QAAQ,EAAE;UACZ,IAAIA,QAAQ,CAACI,mBAAmB,EAAE;YAChCJ,QAAQ,CAACI,mBAAmB,CAAC,SAAS,EAAEP,aAAa,CAAC;WACvD,MAAM;YACLG,QAAQ,CAACE,SAAS,GAAG,IAAI;;;MAG/B;KACD;EACH;CACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}